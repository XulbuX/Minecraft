execute at @s align xz run tp @s ~.5 ~ ~.5

execute at @s positioned ~ ~ ~ run summon block_display ~ ~ ~ {block_state:{Name:"sea_lantern"},transformation:[1.0000f,0.0000f,0.0000f,-0.5000f,0.0000f,1.0000f,0.0000f,0.0000f,0.0000f,0.0000f,1.0000f,-0.5000f,0.0000f,0.0000f,0.0000f,1.0000f],height:1f,width:1f,Rotation:[0f,0f],Invulnerable:1b,Tags:["wpm_moving_platform","wpm_platform_holder"],Passengers:[{id:"shulker",Color:0,Invulnerable:1b,NoAI:1b,NoGravity:1b,PersistenceRequired:1b,Silent:1b,Tags:["wpm_moving_platform","platform_floor"],active_effects:[{id:"invisibility",duration:-1,amplifier:255,show_particles:0b}],DeathTime:20,DeathLootTable:""}]}
execute at @s positioned ~1 ~ ~ run summon block_display ~ ~ ~ {block_state:{Name:"chiseled_quartz_block"},transformation:[1.0000f,0.0000f,0.0000f,-0.5000f,0.0000f,1.0000f,0.0000f,0.0000f,0.0000f,0.0000f,1.0000f,-0.5000f,0.0000f,0.0000f,0.0000f,1.0000f],height:1f,width:1f,Rotation:[0f,0f],Invulnerable:1b,Tags:["wpm_moving_platform","wpm_platform_holder"],Passengers:[{id:"shulker",Color:0,Invulnerable:1b,NoAI:1b,NoGravity:1b,PersistenceRequired:1b,Silent:1b,Tags:["wpm_moving_platform","platform_floor"],active_effects:[{id:"invisibility",duration:-1,amplifier:255,show_particles:0b}],DeathTime:20,DeathLootTable:""}]}
execute at @s positioned ~1 ~ ~1 run summon block_display ~ ~ ~ {block_state:{Name:"quartz_pillar"},transformation:[1.0000f,0.0000f,0.0000f,-0.5000f,0.0000f,1.0000f,0.0000f,0.0000f,0.0000f,0.0000f,1.0000f,-0.5000f,0.0000f,0.0000f,0.0000f,1.0000f],height:1f,width:1f,Rotation:[0f,0f],Invulnerable:1b,Tags:["wpm_moving_platform","wpm_platform_holder"],Passengers:[{id:"shulker",Color:0,Invulnerable:1b,NoAI:1b,NoGravity:1b,PersistenceRequired:1b,Silent:1b,Tags:["wpm_moving_platform","platform_floor"],active_effects:[{id:"invisibility",duration:-1,amplifier:255,show_particles:0b}],DeathTime:20,DeathLootTable:""}]}
execute at @s positioned ~ ~ ~1 run summon block_display ~ ~ ~ {block_state:{Name:"chiseled_quartz_block"},transformation:[1.0000f,0.0000f,0.0000f,-0.5000f,0.0000f,1.0000f,0.0000f,0.0000f,0.0000f,0.0000f,1.0000f,-0.5000f,0.0000f,0.0000f,0.0000f,1.0000f],height:1f,width:1f,Rotation:[0f,0f],Invulnerable:1b,Tags:["wpm_moving_platform","wpm_platform_holder"],Passengers:[{id:"shulker",Color:0,Invulnerable:1b,NoAI:1b,NoGravity:1b,PersistenceRequired:1b,Silent:1b,Tags:["wpm_moving_platform","platform_floor"],active_effects:[{id:"invisibility",duration:-1,amplifier:255,show_particles:0b}],DeathTime:20,DeathLootTable:""}]}
execute at @s positioned ~-1 ~ ~1 run summon block_display ~ ~ ~ {block_state:{Name:"quartz_pillar"},transformation:[1.0000f,0.0000f,0.0000f,-0.5000f,0.0000f,1.0000f,0.0000f,0.0000f,0.0000f,0.0000f,1.0000f,-0.5000f,0.0000f,0.0000f,0.0000f,1.0000f],height:1f,width:1f,Rotation:[0f,0f],Invulnerable:1b,Tags:["wpm_moving_platform","wpm_platform_holder"],Passengers:[{id:"shulker",Color:0,Invulnerable:1b,NoAI:1b,NoGravity:1b,PersistenceRequired:1b,Silent:1b,Tags:["wpm_moving_platform","platform_floor"],active_effects:[{id:"invisibility",duration:-1,amplifier:255,show_particles:0b}],DeathTime:20,DeathLootTable:""}]}
execute at @s positioned ~-1 ~ ~ run summon block_display ~ ~ ~ {block_state:{Name:"chiseled_quartz_block"},transformation:[1.0000f,0.0000f,0.0000f,-0.5000f,0.0000f,1.0000f,0.0000f,0.0000f,0.0000f,0.0000f,1.0000f,-0.5000f,0.0000f,0.0000f,0.0000f,1.0000f],height:1f,width:1f,Rotation:[0f,0f],Invulnerable:1b,Tags:["wpm_moving_platform","wpm_platform_holder"],Passengers:[{id:"shulker",Color:0,Invulnerable:1b,NoAI:1b,NoGravity:1b,PersistenceRequired:1b,Silent:1b,Tags:["wpm_moving_platform","platform_floor"],active_effects:[{id:"invisibility",duration:-1,amplifier:255,show_particles:0b}],DeathTime:20,DeathLootTable:""}]}
execute at @s positioned ~-1 ~ ~-1 run summon block_display ~ ~ ~ {block_state:{Name:"quartz_pillar"},transformation:[1.0000f,0.0000f,0.0000f,-0.5000f,0.0000f,1.0000f,0.0000f,0.0000f,0.0000f,0.0000f,1.0000f,-0.5000f,0.0000f,0.0000f,0.0000f,1.0000f],height:1f,width:1f,Rotation:[0f,0f],Invulnerable:1b,Tags:["wpm_moving_platform","wpm_platform_holder"],Passengers:[{id:"shulker",Color:0,Invulnerable:1b,NoAI:1b,NoGravity:1b,PersistenceRequired:1b,Silent:1b,Tags:["wpm_moving_platform","platform_floor"],active_effects:[{id:"invisibility",duration:-1,amplifier:255,show_particles:0b}],DeathTime:20,DeathLootTable:""}]}
execute at @s positioned ~ ~ ~-1 run summon block_display ~ ~ ~ {block_state:{Name:"chiseled_quartz_block"},transformation:[1.0000f,0.0000f,0.0000f,-0.5000f,0.0000f,1.0000f,0.0000f,0.0000f,0.0000f,0.0000f,1.0000f,-0.5000f,0.0000f,0.0000f,0.0000f,1.0000f],height:1f,width:1f,Rotation:[0f,0f],Invulnerable:1b,Tags:["wpm_moving_platform","wpm_platform_holder"],Passengers:[{id:"shulker",Color:0,Invulnerable:1b,NoAI:1b,NoGravity:1b,PersistenceRequired:1b,Silent:1b,Tags:["wpm_moving_platform","platform_floor"],active_effects:[{id:"invisibility",duration:-1,amplifier:255,show_particles:0b}],DeathTime:20,DeathLootTable:""}]}
execute at @s positioned ~1 ~ ~-1 run summon block_display ~ ~ ~ {block_state:{Name:"quartz_pillar"},transformation:[1.0000f,0.0000f,0.0000f,-0.5000f,0.0000f,1.0000f,0.0000f,0.0000f,0.0000f,0.0000f,1.0000f,-0.5000f,0.0000f,0.0000f,0.0000f,1.0000f],height:1f,width:1f,Rotation:[0f,0f],Invulnerable:1b,Tags:["wpm_moving_platform","wpm_platform_holder"],Passengers:[{id:"shulker",Color:0,Invulnerable:1b,NoAI:1b,NoGravity:1b,PersistenceRequired:1b,Silent:1b,Tags:["wpm_moving_platform","platform_floor"],active_effects:[{id:"invisibility",duration:-1,amplifier:255,show_particles:0b}],DeathTime:20,DeathLootTable:""}]}

execute if entity @s[tag=new] run tag @s remove new
scoreboard players set @s wpm_moving_break 0
scoreboard players set @s wpm_moving_dir -1
tag @s add setup_done
